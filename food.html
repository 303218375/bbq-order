<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>çƒ§çƒ¤ç‚¹å•</title>
  <style>
    body { font-family: sans-serif; padding: 1rem; max-width: 600px; margin: auto; }
    .dish { display: flex; justify-content: space-between; align-items: center; margin: 10px 0; }
    .controls { display: flex; align-items: center; gap: 5px; }
    .controls input { width: 40px; text-align: center; }
    #searchInput, #tableInput { width: 100%; padding: 6px; margin: 10px 0; font-size: 16px; box-sizing: border-box; }
    button { padding: 6px 10px; font-size: 16px; }
    #submitBtn { margin-top: 20px; width: 100%; padding: 12px; font-size: 18px; }
  </style>
</head>
<body>

<h1>ğŸ¢ æˆç«çƒ§çƒ¤</h1>

<input type="text" id="searchInput" placeholder="ğŸ” æœç´¢èœå“..." oninput="renderMenu()" />

<div id="menu"></div>

<div>
  <label>æ¡Œå·ï¼š</label>
  <input type="text" id="tableInput" placeholder="å¦‚ A01">
</div>

<p>æ€»ä»·ï¼šï¿¥<span id="total">0</span></p>
<button id="submitBtn" onclick="submitOrder()">æäº¤è®¢å•</button>

<script>
const dishes = [
  // ç‰¹è‰²å¤§ä¸²
  { id: 201, name: 'æˆç«å½©æ¤’ç‰›è‚‰', price: 15 },
  { id: 202, name: 'æˆç«æ¢…èŠ±è‚‰', price: 15 },
  { id: 203, name: 'æˆç«æ²¹è¾¹ç‹', price: 15 },
  { id: 204, name: 'æˆç«ç¾”ç¾Šæ’è‚‰', price: 15 },
  { id: 205, name: 'æˆç«ç‰›å®«å', price: 15 },

  // çƒ§çƒ¤ç±»
  { id: 206, name: 'ç¾Šè‚‰ä¸²', price: 4 },
  { id: 207, name: 'ç¾Šè‚‰ç­‹', price: 4 },
  { id: 208, name: 'ç¾Šæ¿ç­‹', price: 5 },
  { id: 209, name: 'ç‰›è‚‰ä¸²', price: 4 },
  { id: 210, name: 'ç‰›èƒ¸å£æ²¹', price: 6 },
  { id: 211, name: 'å¿ƒç®¡', price: 4 },
  { id: 212, name: 'æ¿ç­‹', price: 4 },
  { id: 213, name: 'æœˆç‰™éª¨', price: 4 },
  { id: 214, name: 'æŒä¸­å®', price: 4 },
  { id: 215, name: 'äº”èŠ±è‚‰ä¸²', price: 3 },
  { id: 216, name: 'é¸¡èƒ—', price: 3 },
  { id: 217, name: 'é¸¡å¿ƒ', price: 3 },
  { id: 218, name: 'é¸¡è„šç­‹', price: 3 },
  { id: 219, name: 'é¸¡çš®', price: 3 },
  { id: 220, name: 'é¸¡çˆª', price: 5 },
  { id: 221, name: 'é¸¡ç¿…', price: 8 },
  { id: 222, name: 'çƒ¤å¤§è™¾', price: 5 },
  { id: 223, name: 'é±¼è±†è…', price: 3 },
  { id: 224, name: 'é¢ç­‹', price: 3 },
  { id: 225, name: 'çƒ¤é¦’å¤´ç‰‡', price: 2 },
  { id: 226, name: 'çƒ¤å°–æ¤’', price: 2 },
  { id: 227, name: 'çƒ¤éŸ­èœ', price: 12 },
  { id: 228, name: 'çƒ¤èŒ„å­', price: 15 },

  // çƒ§çƒ¤ç±»ï¼ˆå‡‰èœï¼‰
  { id: 229, name: 'ç§‹åˆ€é±¼', price: 10 },
  { id: 230, name: 'é³•é±¼', price: 10 },
  { id: 231, name: 'å°é»„é±¼', price: 4 },
  { id: 232, name: 'ç¾Šè…°', price: 25 },
  { id: 233, name: 'ç¾Šé­', price: 25 },
  { id: 234, name: 'æ‹é»„ç“œ', price: 15 },
  { id: 235, name: 'å‡‰æ‹Œæœ¨è€³', price: 15 },
  { id: 236, name: 'å‡‰æ‹Œè…ç«¹', price: 15 },
  { id: 237, name: 'æµ·å¸¦æ‰£', price: 15 },
  { id: 238, name: 'å‡‰æ‹ŒåœŸè±†ä¸', price: 15 },
  { id: 239, name: 'å‡‰æ‹Œè±†è…ä¸', price: 15 },
  { id: 240, name: 'èŠ±ç”Ÿæ¯›è±†', price: 15 },
  { id: 241, name: 'è¾£ç‚’èŠ±è›¤', price: 28 },
  { id: 242, name: 'è¾£ç‚’è›å­', price: 38 },
  { id: 243, name: 'è¾£ç‚’ç”°èº', price: 20 },
  { id: 244, name: 'éº»è¾£å°é¾™è™¾ï¼ˆå°ä»½ï¼‰', price: 38 },
  { id: 245, name: 'éº»è¾£å°é¾™è™¾ï¼ˆå¤§ä»½ï¼‰', price: 68 },
  { id: 246, name: 'éº»è¾£ç‰›è›™', price: 68 },
  { id: 247, name: 'ææ±å°æµ·é²œ', price: 38 },

  // é“æ¿ç±»
  { id: 248, name: 'é¾™ç ', price: 15 },
  { id: 249, name: 'å‡¤èˆ', price: 15 },
  { id: 250, name: 'é±¿é±¼å¤§æ¿', price: 25 },
  { id: 251, name: 'é±¿é±¼ä¸­æ¿', price: 15 },
  { id: 252, name: 'é±¿é±¼å°æ¿', price: 10 },
  { id: 253, name: 'é±¿é±¼é¡»', price: 10 },
  { id: 254, name: 'é±¿é±¼å˜´', price: 10 },
  { id: 255, name: 'è±†çš®å°ä¸²', price: 10 },
  { id: 256, name: 'ç‰ç±³å°ä¸²', price: 10 },
  { id: 257, name: 'è…Šè‚ å°ä¸²', price: 10 },
  { id: 258, name: 'ç‰›è‚‰å°ä¸²', price: 10 },
  { id: 259, name: 'é¸¡è‚‰å°ä¸²', price: 10 },
  { id: 260, name: 'é¸­è‚ å°ä¸²', price: 10 },
  { id: 261, name: 'çƒ¤ç”Ÿèš', price: 30 },

  // ä¸»é£Ÿ
  { id: 262, name: 'æ‹›ç‰Œç‰›è‚‰é¥­', price: 25 },
  { id: 263, name: 'åŒ—å¹³ç‚¸é…±é¢', price: 18 },
  { id: 264, name: 'è¥¿çº¢æŸ¿é¸¡è›‹é¢', price: 15 },
  { id: 265, name: 'è¥¿çº¢æŸ¿é¸¡è›‹é¥­', price: 15 }
    
  ];

  const cart = {};

  function renderMenu() {
    const keyword = document.getElementById('searchInput').value.trim().toLowerCase();
    const menu = document.getElementById('menu');
    menu.innerHTML = '';

    dishes.filter(d => d.name.toLowerCase().includes(keyword)).forEach(d => {
      const count = cart[d.id] || 0;
      const div = document.createElement('div');
      div.className = 'dish';
      div.innerHTML = `
        <span>${d.name} - ï¿¥${d.price}</span>
        <div class="controls">
          <button onclick="changeCount(${d.id}, -1)">-</button>
          <input type="number" min="0" value="${count}" id="input-${d.id}" onchange="setCount(${d.id}, this.value)">
          <button onclick="changeCount(${d.id}, 1)">+</button>
        </div>
      `;
      menu.appendChild(div);
    });
    updateTotal();
  }

  function changeCount(id, delta) {
    cart[id] = (cart[id] || 0) + delta;
    if (cart[id] < 0) cart[id] = 0;
    document.getElementById(`input-${id}`).value = cart[id];
    updateTotal();
  }

  function setCount(id, value) {
    const v = parseInt(value);
    cart[id] = isNaN(v) || v < 0 ? 0 : v;
    updateTotal();
  }

  function updateTotal() {
    let total = 0;
    for (let id in cart) {
      const dish = dishes.find(d => d.id == id);
      total += dish.price * cart[id];
    }
    document.getElementById('total').innerText = total.toFixed(2);
  }

  function submitOrder() {
    const tableNo = document.getElementById('tableInput').value.trim();
    if (!tableNo) return alert('è¯·è¾“å…¥æ¡Œå·');

    const orderItems = dishes.filter(d => cart[d.id]).map(d => ({
      name: d.name,
      price: d.price,
      quantity: cart[d.id]
    }));

    if (orderItems.length === 0) return alert('è¯·å…ˆé€‰æ‹©èœå“');

    const orderId = 'ORD' + Date.now();
    const order = { table: tableNo, orderId, items: orderItems };

    localStorage.setItem(`order_${orderId}`, JSON.stringify(order));
    location.href = `table.html?table=${tableNo}&order=${orderId}`;
  }

  renderMenu();
</script>

</body>
</html>